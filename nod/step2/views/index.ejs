<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <style>
        body{background-color: gray;}
    </style>
    <title>Document</title>
</head>
<body>
    <img src="data:image/png;base64,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"/>
    
    <h1><%= title %></h1>
    <input type="file" name="f1"  accept=".png,.jpg"/>
    <div>
        <a href="#">link</a>
    </div>
    <script>
const input = document.querySelector("input");

input.addEventListener("change", function(event){
  const file = event.target.files[0]; // file 객체
  const reader = new FileReader(); // fileReader 생성
//  reader.readAsText(file);
//  reader.readAsArrayBuffer(file);
//  reader.readAsBinaryString(file);
 reader.readAsDataURL(file);

  reader.onload = function (e) {
   // load 이벤트의 핸들러. 이 이벤트는 읽기 동작이 성공적으로 완료 되었을 때마다 발생
   console.log(e.target.result)
//    $('a').attr('href',e.target.result);
//    $('a').attr('href',dataURLtoFile('data:image/png;base64,'+e.target.result,'hello.jpg'));
$('a').attr('download','img.png');
$('a').attr('href','data:image/png;base64,'+e.target.result);
  }
});

const dataURLtoFile = (dataurl, fileName) => {
 
 var arr = dataurl.split(','),
     mime = arr[0].match(/:(.*?);/)[1],
     bstr = atob(arr[1]), 
     n = bstr.length, 
     u8arr = new Uint8Array(n);
     
 while(n--){
     u8arr[n] = bstr.charCodeAt(n);
 }
 
 return new File([u8arr], fileName, {type:mime});
}

//Usage example:
// var file = dataURLtoFile('data:text/plain;base64,aGVsbG8gd29ybGQ=','hello.txt');
// console.log(file);

function downloadURI(uri, name) {
  var link = document.createElement("a");
  link.download = name;
  link.href = uri;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  delete link;
}
downloadURI("data:text/html,HelloWorld!", "helloWorld.txt");
    </script>
</body>
</html>